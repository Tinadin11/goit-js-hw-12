{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["//функції для HTTP-запитів\n\nimport axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport { getPictures }\n\n\nasync function getPictures(name, page) {\n  const KEY = '47181465-58855b534a7ed572abb95719a';\n\n  try {\n    const response = await axios.get('https://pixabay.com/api/?', {\n          params: {\n              key: KEY,\n              q: name,\n              image_type: 'photo',\n              orientation: 'horizontal',\n              safesearch: true,\n              page: page,\n              per_page: 15,\n          }\n      })\n      if (response.status !== 200 || !response.data) {\n        throw new Error('Error receiving data from API');\n      }\n      return response.data;\n  }\n  catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Sorry! Connection problems. Please try later!',\n      position: 'bottomRight',\n    });\n    console.error(error.message);\n  }\n}","//  елементи інтерфейсу\n\nexport function createMarkup(arr) {\n  return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n    `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              width=\"360\"\n            />\n          </a>\n          <ul class=\"info-list\">\n            <li class=\"info-item\">\n              <h2 class=\"subtitle\">Likes</h2>\n              <p class=\"info\">${likes}</p>\n            </li>\n            <li class=\"info-item\">\n              <h2 class=\"subtitle\">Views</h2>\n              <p class=\"info\">${views}</p>\n            </li>\n            <li class=\"info-item\">\n              <h2 class=\"subtitle\">Comments</h2>\n              <p class=\"info\">${comments}</p>\n            </li>\n            <li class=\"info-item\">\n              <h2 class=\"subtitle\">Downloads</h2>\n              <p class=\"info\">${downloads}</p>\n            </li>\n          </ul>\n    </li>`)\n    .join('');\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport './js/pixabay-api';\nimport { getPictures } from './js/pixabay-api';\nimport './js/render-functions';\nimport { createMarkup } from './js/render-functions';\n\nconst form = document.querySelector('.form-search');\nconst images = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst input = document.querySelector('.input-search');\nconst buttonLoad = document.querySelector('.button-load');\nconst loadingMessage = document.querySelector('#loading-message');\n\nloader.style.display = 'none';\nbuttonLoad.style.display = 'none';\nlet currentPage = 1;\nconst perPage = 15;\nlet searchQuery = '';\nloadingMessage.style.display = 'none';\n\nbuttonLoad.addEventListener('click', loadMorePictures);\n\nasync function loadMorePictures() {\n  try {\n    currentPage += 1;\n    loader.style.display = 'block';\n    loadingMessage.style.display = 'block'; // Hide text\n    \n    await renderPictures(searchQuery, currentPage);\n\n    // Плавне прокручування після завантаження нових картинок\n    const getCard = () => document.querySelector('.gallery-item').getBoundingClientRect();\n    \n    window.scrollBy({\n      top: getCard().height * 2,\n      left: 0,\n      behavior: 'smooth',\n    });  \n  } catch (error) {\n    console.error('Error loading page:', error);\n  } finally {\n    loader.style.display = 'none';\n    loadingMessage.style.display = 'none'; // Hide text\n  }\n}\n\nform.addEventListener('submit', async (event) => {\n  try {\n    event.preventDefault();\n    images.innerHTML = '';\n    loader.style.display = 'block';\n    buttonLoad.style.display = 'none'; // Hide button\n    loadingMessage.style.display = 'none';\n    searchQuery = input.value.trim();\n    if (!searchQuery) {\n      iziToast.warning({ title: 'Caution', message: 'Please complete the field!' });\n      return;\n    }\n    currentPage = 1;\n    await renderPictures(searchQuery, currentPage);\n  } catch (error) {\n    console.error('Error in searching:', error);\n  } finally {\n    loader.style.display = 'none';\n    loadingMessage.style.display = 'none'; // Hide text\n  }\n});\n\nasync function renderPictures(inputValue, currentPage) {\n  try {\n    const data = await getPictures(inputValue, currentPage);\n    const totalPages = Math.ceil(data.totalHits / perPage);\n    loader.style.display = 'block';\n\n    if (!data.hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message: `No results found for \"${searchQuery}\". Please try again with a different query.`,\n      });\n      buttonLoad.style.display = 'none'; // Hide button if there are no results\n      return false;\n    } else {\n      buttonLoad.style.display = 'block';\n    }\n    \n    images.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits));\n\n    // Плавне прокручування після додавання картинок\n    setTimeout(() => {\n      const cardHeight = document.querySelector('.gallery').firstElementChild.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }, 300); // Додаємо затримку після оновлення галереї\n\n    const refreshPage = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    refreshPage.refresh();\n    form.reset();\n\n    if (currentPage >= totalPages) {\n      buttonLoad.style.display = 'none';\n      return false;\n    } else if (!data.hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return false;\n    }\n    return true;\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error',\n      message: 'Sorry, something went wrong. This is an error!',\n      position: 'bottomRight',\n    });\n  }\n}\n"],"names":["getPictures","name","page","KEY","response","axios","error","iziToast","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","images","loader","input","buttonLoad","loadingMessage","currentPage","perPage","searchQuery","loadMorePictures","renderPictures","getCard","event","inputValue","data","totalPages","cardHeight","SimpleLightbox"],"mappings":"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"}